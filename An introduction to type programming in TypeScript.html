<!DOCTYPE html><html lang="en"><head><script src="https://phone-rejoice.zhenghao.io/script.js" data-site="ESNDEPHC" defer></script><meta name="next-font-preconnect" /><meta charSet="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@he_zhenghao" /><meta name="twitter:creator" content="@he_zhenghao" /><meta property="og:title" content="Zhenghao's site" /><meta property="og:description" content="The official site of Zhenghao He, a software engineer and a TypeScript/JavaScript enthusiast." /><meta property="og:site_name" content="zhenghao.io" /><meta name="theme-color" content="#000" /><title>An introduction to type programming in TypeScript</title><meta name="robots" content="index,follow" /><meta name="googlebot" content="index,follow" /><meta name="description" content="Learn to write types using the type language and leverage your existing javascript knowledge to master TypeScript quicker" /><meta property="og:title" content="An introduction to type programming in TypeScript" /><meta property="og:description" content="Learn to write types using the type language and leverage your existing javascript knowledge to master TypeScript quicker" /><meta property="og:url" content="https://www.zhenghao.io/posts/type-programming" /><link rel="canonical" href="https://www.zhenghao.io/posts/type-programming" /><meta name="twitter:title" content="An introduction to type programming in TypeScript" /><meta name="twitter:description" content="Learn to write types using the type language and leverage your existing javascript knowledge to master TypeScript quicker" /><link rel="stylesheet" href="/styles/prism.css" /><meta name="next-head-count" content="20" /><link rel="preload" href="/_next/static/css/a4cd6176500b7ad65a28.css" as="style" /><link rel="stylesheet" href="/_next/static/css/a4cd6176500b7ad65a28.css" data-n-g /><noscript data-n-css></noscript><script defer noModule src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script defer src="/_next/static/chunks/204.ad050be5e2c469c3cdc1.js"></script><script src="/_next/static/chunks/webpack-f078e51f08578af73c9c.js" defer></script><script src="/_next/static/chunks/framework-539a8e6071c37131a70b.js" defer></script><script src="/_next/static/chunks/main-4b4530ae248c985c75ac.js" defer></script><script src="/_next/static/chunks/pages/_app-a865e648087202bec91a.js" defer></script><script src="/_next/static/chunks/675-b5c544a448dd608b200f.js" defer></script><script src="/_next/static/chunks/636-5f4fb9e9a8ce5509afd4.js" defer></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-dab6c73f3e12a9d3f1af.js" defer></script><script src="/_next/static/CqfzUjxO3hrsg__Vyai7K/_buildManifest.js" defer></script><script src="/_next/static/CqfzUjxO3hrsg__Vyai7K/_ssgManifest.js" defer></script></head><body class="dark"><script>!function(){var a=document.body.classList;a.remove("dark");var e=localStorage.getItem("theme");e?a.add(e.replace(/"/g,"")):window.matchMedia("(prefers-color-scheme: dark)").matches?a.add("dark"):a.add("light")}()</script><div id="__next"><div class="w-full h-full"><header class="relative w-full h-16"><div class="fixed h-20 z-40 w-full flex justify-between backdrop-blur-[20px] backdrop-saturate-150 bg-white/50 dark:bg-[#0D0D1050]"><nav class="w-full sm:max-w-[75ch] m-auto sm:grid md:flex px-5 justify-between items-center "><a title="Home" aria-label="Home" href="/"><span>Tue 16:13, Seattle</span></a><div class="flex items-center gap-5"><a class="capitalize " href="/posts">posts</a><div class="flex items-center w-5 h-5 bg-transparent"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" color="white" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" style="cursor: pointer; transform:  rotate(40deg);"><mask id="circle-mask-0"><rect x="0" y="0" width="100%" height="100%" fill="white"></rect><circle style="cx: 50%; cy: 23%;" r="9" fill="black"></circle></mask><circle cx="12" cy="12" fill="white" style="r: 9px;" mask="url(#circle-mask-0)"></circle><g stroke="currentColor" style="opacity: 0;"><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></g></svg></div><span style="cursor: pointer;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></span><div class="ml-16"><button type="button" aria-label="Search" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><svg width="20" height="20" viewBox="0 0 20 20" class="DocSearch-Search-Icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></nav></div></header><main class="w-full"><article class="max-w-[85ch] mx-auto pt-12 pb-28  px-5"><div><h1 class="mb-1 text-3xl font-black capitalize md:text-4xl">An introduction to type programming in TypeScript</h1><small style="margin: 12px 12px 0 0; display: inline-block; cursor: pointer;" class="link-tag">#typescript</small><div class="flex flex-col	pt-4 pb-8 text-sm font-thin uppercase text-warmGray-500 dark:text-warmGray-400"><time dateTime="2022-01-31">Published on 31 January, 2022</time><time dateTime="2022-07-24">Last updated on 24 July, 2022</time></div><p class="italic">Learn to write types using the type language and leverage your existing javascript knowledge to master TypeScript quicker</p></div><blockquote>
<p>See discussions on <a href="https://news.ycombinator.com/item?id=30173375" target="_blank" rel="noopener noreferrer" class="link-btn">Hacker News</a></p>
</blockquote>
<h2 id="types-are-a-complex-language-of-their-own">Types are a complex language of their own<a class="anchor" href="/posts/type-programming#types-are-a-complex-language-of-their-own">#</a></h2>
<p>I used to think of TypeScript as just JavaScript with type annotations sprinkled on top of it. With that mindset, I often found writing correct types tricky and daunting, to a point they got in the way of building the actual applications I wanted to build, and frequently, it led me to reach for <code>any</code>. And with <code>any</code>, I lose all type safety.</p>
<p>Indeed, types can get really complicated if you let them. After writing TypeScript for a while, it occurred to me that the TypeScript language actually consists of two sub-languages - one is JavaScript, and the other is the type language:</p>
<ul>
<li>for the JavaScript language, the world is made of JavaScript values</li>
<li>for the type language, the world is made of types</li>
</ul>
<p>When we write TypeScript code, we are constantly dancing between these two worlds: we create types in our type world and &quot;summon&quot; them in our JavaScript world using type annotations (or have them implicitly inferred by the compiler); we can go in the other direction too: use TypeScript's <a href="https://www.typescriptlang.org/docs/handbook/2/typeof-types.html#the-typeof-type-operator" target="_blank" rel="noopener noreferrer" class="link-btn">typeof operator</a> on JavaScript variables/properties to retrieve the corresponding types (not the <code>typeof</code> operator JavaScript provides to check runtime values' types).</p>
<p><div class="my-10"><img src="/art/blog/type-programming/twoworlds.png" alt="alt" layout="fill" /></div></p>
<p>The JavaScript language is very expressive, so is the type language - in fact, the type language is so expressive that it has been proven to be Turing complete.</p>
<p>Here I don't make any value judgment of whether being Turing complete is good or bad, nor do I know if it is even by design or by accident (in fact, often times, Turing-completeness was achieved <a href="http://beza1e1.tuxen.de/articles/accidentally_turing_complete.html" target="_blank" rel="noopener noreferrer" class="link-btn">by accident</a>). My point is the type language itself, as innocuous as it seems, is certainly powerful, highly capable and can perform arbitrary computation at compile time.</p>
<p>When I started to think of the type language in TypeScript as a full-fledged programming language, I realized it even has a few characteristics of a functional programming language:</p>
<ol>
<li>use recursion instead of iteration
<ol>
<li>in <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#tailrec-conditional" target="_blank" rel="noopener noreferrer" class="link-btn">TypeScript 4.5</a> we have tail call optimized recursion (to some extent)</li>
</ol>
</li>
<li>types (data) are immutable</li>
</ol>
<p>In this post, we will learn the type language in TypeScript by comparing it with JavaScript so that you can leverage your existing JavaScript knowledge to master TypeScript quicker.</p>
<blockquote>
<p>This post assumes that readers have some familiarity with JavaScript and TypeScript. And if you want to learn TypeScript from scratch properly, you should start with <a href="https://www.typescriptlang.org/docs/handbook/intro.html" target="_blank" rel="noopener noreferrer" class="link-btn">The TypeScript Handbook</a>. I am not here to compete with the docs.</p>
</blockquote>
<h2 id="variable-declaration">Variable declaration<a class="anchor" href="/posts/type-programming#variable-declaration">#</a></h2>
<p>In JavaScript, the world is made of JavaScript values, and we declare variables to refer to values using keywords <code>var</code>, <code>const</code> and <code>let</code>. For example:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">}</span>
</code></pre></div>
<p>In the type language, the world is made of types, and we declare type variables using keywords <code>type</code> and <code>interface</code>. For example:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Obj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span>
</code></pre></div>
<blockquote>
<p>A more accurate name for “type variables” is type synonyms or type alias. I use the word &quot;type variables&quot; to draw an analogy to how a JavaScript variable references a value.</p>
<p>It is not a perfect analogy though, a type alias doesn’t create or introduce a new type—they are only a new name for existing types. But I hope drawing this analogy makes explaining concepts of the type language much easier.</p>
</blockquote>
<p>Types and values are very related. A type, at its core, represents the set of possible values and the valid operations that can be done on the values. Sometimes the set is finite, e.g., <code>type Name = 'foo' | 'bar'</code>, a lot of times the set is infinite, e.g., <code>type Age = number</code>. In TypeScript we integrate types and values and make them work together to ensure that the runtime values match the compile-time types.</p>
<h3 id="local-variable-declaration">Local variable declaration<a class="anchor" href="/posts/type-programming#local-variable-declaration">#</a></h3>
<p>We talked about how you can create type variables in the type language. However, the type variables have a global scope by default. To create a local type variable, we can use the <code>infer</code> keyword in our type language.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span> <span class="token comment">// global scope</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">infer</span></span> <span class="token constant">C</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
    <span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token string">'foo'</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token comment">// *only* inside this expression, C represents A</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">never</span>
</code></pre></div>
<p>Although this particular way of creating scoped variables might seem strange to JavaScript developers, it actually finds its roots in some pure functional programming languages. For example, in Haskell, we can use the <code>let</code> keyword with <code>in</code> to perform scoped assignments as in <code>let {assignments} in {expression}</code>:</p>
<div class="remark-highlight"><pre class="language-Haskell"><code class="language-Haskell">let two = 2; three = 3 in two * three 
//                         ↑       ↑
// two and three are only in scope for the expression `two * three` </code></pre></div>
<details><summary><b><code>infer</code> is useful for caching some intermediate types</b></summary>
<p>Here is an example:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">ConvertFooToBar<span class="token operator">&lt;</span><span class="token constant">G</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">G</span> <span class="token keyword">extends</span> <span class="token string">'foo'</span> <span class="token operator">?</span> <span class="token string">'bar'</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">ConvertBarToBaz<span class="token operator">&lt;</span><span class="token constant">G</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">G</span> <span class="token keyword">extends</span> <span class="token string">'bar'</span> <span class="token operator">?</span> <span class="token string">'baz'</span> <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">ConvertFooToBaz<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> ConvertFooToBar<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">infer</span></span> Bar <span class="token operator">?</span> 
        Bar <span class="token keyword">extends</span> <span class="token string">'bar'</span> <span class="token operator">?</span> ConvertBarToBaz<span class="token operator">&lt;</span>Bar<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token builtin">never</span> 
    <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">Baz</span> <span class="token operator">=</span> ConvertFooToBaz<span class="token operator">&lt;</span><span class="token string">'foo'</span><span class="token operator">&gt;</span>
</code></pre></div><p>Without <code>infer</code> to create a local type variable <code>Bar</code>, we have to calculate <code>Bar</code> twice:</p><div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">ConvertFooToBar<span class="token operator">&lt;</span><span class="token constant">G</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">G</span> <span class="token keyword">extends</span> <span class="token string">'foo'</span> <span class="token operator">?</span> <span class="token string">'bar'</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token keyword">type</span> <span class="token class-name">ConvertBarToBaz<span class="token operator">&lt;</span><span class="token constant">G</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">G</span> <span class="token keyword">extends</span> <span class="token string">'bar'</span> <span class="token operator">?</span> <span class="token string">'baz'</span> <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token keyword">type</span> <span class="token class-name">ConvertFooToBaz<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> ConvertFooToBar<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token string">'bar'</span> <span class="token operator">?</span> 
    ConvertBarToBaz<span class="token operator">&lt;</span>ConvertFooToBar<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token builtin">never</span> <span class="token comment">// call `ConvertFooToBar` twice</span>

<span class="token keyword">type</span> <span class="token class-name">Baz</span> <span class="token operator">=</span> ConvertFooToBaz<span class="token operator">&lt;</span><span class="token string">'foo'</span><span class="token operator">&gt;</span>
</code></pre></div></details>
<h2 id="equality-comparisons-and-conditional-branching">Equality comparisons and conditional branching<a class="anchor" href="/posts/type-programming#equality-comparisons-and-conditional-branching">#</a></h2>
<p>In JavaScript. we can use <code>===</code>/<code>==</code> with if statement or the conditional (ternary) operator <code>?</code> to perform equality check and conditional branching.</p>
<p>In the type language, on the other hand, we use the <code>extends</code> keyword for &quot;equality check&quot;, and the conditional (ternary) operator <code>?</code> for conditional branching too as in:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript">TypeC <span class="token operator">=</span> TypeA <span class="token keyword">extends</span> <span class="token class-name">TypeB</span> <span class="token operator">?</span> TrueExpression <span class="token operator">:</span> FalseExpression
</code></pre></div>
<p>If <code>TypeA</code> is assignable or substitutable to <code>TypeB</code>, then we enter the first branch and get the type from <code>TrueExpression</code> and assign that to <code>TypeC</code> ; otherwise we get the type from <code>FalseExpression</code> as a result to <code>TypeC</code>.</p>
<blockquote>
<p>The concept of assignability/substitutability is one of the core concepts in TypeScript that deserves a separate post - I wrote <a class="link-btn" href="/posts/type-hierarchy-tree">one covering that in detail</a>.</p>
</blockquote>
<p>A concrete example in JavaScript:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token string">'foo'</span>
<span class="token keyword">let</span> matched

<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>username <span class="token operator">===</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    matched <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    matched <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Translate it into the type language:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Username</span> <span class="token operator">=</span> <span class="token string">'foo'</span>
<span class="token keyword">type</span> <span class="token class-name">Matched</span> <span class="token operator">=</span> Username <span class="token keyword">extends</span> <span class="token string">'foo'</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// true</span>
</code></pre></div>
<p>The <code>extends</code> keyword is versatile. It can also apply constraints to generic type parameters. For example:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getUserName</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>user<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> user<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
</code></pre></div>
<p>By adding the generic constraints, <code>&lt;T extends {name: string}&gt;</code> we ensure the argument our function takes always consist of a <code>name</code> property of the type <code>string</code>.</p>
<h2 id="retrieve-types-of-properties-by-indexing-into-object-types">Retrieve types of properties by indexing into object types<a class="anchor" href="/posts/type-programming#retrieve-types-of-properties-by-indexing-into-object-types">#</a></h2>
<p>In JavaScript we can access object properties with square brackets e.g. <code>obj['prop']</code> or the dot operator e.g., <code>obj.prop</code>.</p>
<p>In the type language, we can extract property types with square brackets as well.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Name</span> <span class="token operator">=</span> User<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>
</code></pre></div>
<p>This works not just with object types, we can also index the type with tuples and arrays.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Names</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">Name</span> <span class="token operator">=</span> Names<span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span>

<span class="token keyword">type</span> <span class="token class-name">Tuple</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">Age</span> <span class="token operator">=</span> Tuple<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
</code></pre></div>
<h2 id="functions">Functions<a class="anchor" href="/posts/type-programming#functions">#</a></h2>
<p>Functions are the main reusable “building blocks” of any JavaScript program. They take some input (some JavaScript values) and return an output (also some JavaScript values).
In the type language, we have generics. Generics <strong>parameterize</strong> types like functions <strong>parameterize</strong> value. Therefore, a generic is conceptually similar to a function in JavaScript.</p>
<p>For example, in JavaScript:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;hello&quot;, &quot;world&quot;]</span>
</code></pre></div>
<p>For our type language, we have:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Fn  <span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'world'</span><span class="token operator">&gt;</span></span>   <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">]</span>
<span class="token comment">//   ↑    ↑           ↑                          ↑              ↑</span>
<span class="token comment">// name parameter parameter type          default value   function body/return statement</span>

<span class="token keyword">type</span> <span class="token class-name">Result</span> <span class="token operator">=</span> Fn<span class="token operator">&lt;</span><span class="token string">'hello'</span><span class="token operator">&gt;</span> <span class="token comment">// [&quot;hello&quot;, &quot;world&quot;]</span>
</code></pre></div>
<details><summary><b>this is still not a perfect analogy though...</b></summary>
<p>Generics are by no means exactly the same as JavaScript's functions. For one, unlike functions in JavaScript, Generics are not first-class citizens in the type language. That means we cannot pass a generic to another generic like we pass a function to another function as TypeScript doesn't allow <a href="https://github.com/microsoft/TypeScript/issues/1213" target="_blank" rel="noopener noreferrer" class="link-btn">generics as type parameters</a>.</p></details>
<h3 id="map-and-filter">Map and filter<a class="anchor" href="/posts/type-programming#map-and-filter">#</a></h3>
<p>In our type language, types are immutable. If we want to modify a part of a type, we have to transform the existing ones into <strong>new types</strong>. In the type language, the details of iterating over a data structure (i.e. an object type) and applying transformations evenly are abstracted away by <a href="https://www.typescriptlang.org/docs/handbook/2/mapped-types.html" target="_blank" rel="noopener noreferrer" class="link-btn">Mapped Types</a>. We can use it to implement operations that are conceptually similar to the map and filter array methods in JavaScript.</p>
<p>In JavaScript, let's say we want to transform an object's properties from numbers to strings:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">28</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">stringifyProp</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">fromEntries</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> userWithStringProps <span class="token operator">=</span> <span class="token function">stringifyProp</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token comment">// {name:'foo', age: '28'}</span>
</code></pre></div>
<p>In the type language, the mapping is done using this syntax <code>[K in keyof T]</code> where the <code>keyof</code> operator gives us property names as a string union type.</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">StringifyProp<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UserWithStringProps</span> <span class="token operator">=</span> StringifyProp<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token comment">// { name: string; age: string; }</span>
</code></pre></div>
<p>In JavaScript, we can filter out the properties of an object based on some critiria. For example, we can filter out all non-string properties:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">28</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">filterNonStringProp</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">fromEntries</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> filteredUser <span class="token operator">=</span> <span class="token function">filterNonStringProp</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token comment">// {name: 'foo'}</span>
</code></pre></div>
<p>In our type language, this can be achieved with the <code>as</code> operator and the <code>never</code> type:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">FilterStringProp<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">FilteredUser</span> <span class="token operator">=</span> FilterStringProp<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token comment">// { name: string }</span>
</code></pre></div>
<p>There are a bunch of builtin <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" target="_blank" rel="noopener noreferrer" class="link-btn">utility “functions”</a> (generics) for transforming types in TypeScript so often times you don't have to re-invent the wheels.</p>
<h2 id="pattern-matching">Pattern matching<a class="anchor" href="/posts/type-programming#pattern-matching">#</a></h2>
<p>We can also use the <code>infer</code> keyword to perform pattern matching in the type language.</p>
<p>For example, in a JavaScript program, we can use regex to extract a part of a string:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'foo-bar'</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo-<span class="token quantifier number">*</span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 'bar'</span>
</code></pre></div>
<p>The equivalence in our type language:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">Str</span> <span class="token operator">=</span> <span class="token string">'foo-bar'</span>
<span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token operator">=</span> Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> rest <span class="token operator">:</span> <span class="token builtin">never</span> <span class="token comment">// 'bar'</span>
</code></pre></div>
<h2 id="recursion-instead-of-iteration">Recursion, instead of iteration<a class="anchor" href="/posts/type-programming#recursion-instead-of-iteration">#</a></h2>
<p>Just like many pure functional programming languages out there, in our type language, there is no syntactical construct for for loop to iterate over a list of data. Recursion take the place of loops.</p>
<p>Let's say in JavaScript, we want to write a function to return an array with same item repeated multiple times. Here is one possible way you can do that:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fillArray</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The recursive solution would be:</p>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fillArray</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> n<span class="token punctuation">,</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> array<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> n <span class="token operator">?</span> array <span class="token operator">:</span> <span class="token function">fillArray</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> n<span class="token punctuation">,</span> <span class="token punctuation">[</span>item<span class="token punctuation">,</span> <span class="token spread operator">...</span>array<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>How do we write out the equivalence in our type language? Here are logical steps to arrive at one solution:</p>
<ol>
<li>create a generic type called <code>FillArray</code> (remember we talked about that generics in our type language are just like functions?)
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript">FillArray<span class="token operator">&lt;</span>Item<span class="token punctuation">,</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span><span class="token punctuation">,</span> <span class="token builtin">Array</span> <span class="token keyword">extends</span> <span class="token class-name">Item</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div>
</li>
<li>Inside the &quot;function body&quot;, we need to check if the <code>length</code> property on <code>Array</code> is already <code>N</code> using the <code>extends</code> keyword.
<ul>
<li>if it has reached to <code>N</code> (the base case), then we simply return <code>Array</code></li>
<li>if it hasn't reached to <code>N</code>, it recurses and added one more <code>Item</code> into <code>Array</code></li>
</ul>
</li>
</ol>
<p>Putting these together, we have:</p>
<div class="remark-highlight"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">FillArray<span class="token operator">&lt;</span>Item<span class="token punctuation">,</span> <span class="token constant">N</span> <span class="token keyword">extends</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">Array</span> <span class="token keyword">extends</span> Item<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span> 
    <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">N</span></span> 
        <span class="token operator">?</span> <span class="token builtin">Array</span> <span class="token operator">:</span> FillArray<span class="token operator">&lt;</span>Item<span class="token punctuation">,</span> <span class="token constant">N</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token builtin">Array</span><span class="token punctuation">,</span> Item<span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Foos</span> <span class="token operator">=</span> FillArray<span class="token operator">&lt;</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token comment">// [&quot;foo&quot;, &quot;foo&quot;, &quot;foo&quot;]        </span>
</code></pre></div>
<h3 id="limits-for-recursion-depth">Limits for recursion depth<a class="anchor" href="/posts/type-programming#limits-for-recursion-depth">#</a></h3>
<p>Before TypeScript 4.5, the max recursion depth is <a href="https://www.typescriptlang.org/play?ts=4.4.4&amp;ssl=3&amp;ssc=10&amp;pln=3&amp;pc=17#code/C4TwDgpgBAShkENgDkA8BJYEC2AaKyUEAHlgHYAmAzlGQK7YBGEATvgCp1gA20J51KAjIgA2gF0oAXigSAfNKiceEUQHJeZAObAAFmsn8IlGoQD8SrrygAuWPAhI0mHPmT5RAOm-Le+F9jicgDcAFCgkFAAQopwiCioagCMavgALACsCuHg0ACCsQ5OiSnpAGwKAPSVUFTACADGANZQAPYAbqwAZtytAO5AA" target="_blank" rel="noopener noreferrer" class="link-btn">45</a>. In TypeScript 4.5, we have tail call optimization, and the limit increased to <a href="https://www.typescriptlang.org/play?ts=4.5.4#code/C4TwDgpgBAShkENgDkA8BJYEC2AaKyUEAHlgHYAmAzlGQK7YBGEATvgCp1gA20J51KAjIgA2gF0oAXigSAfNKiceEUQHJeZAObAAFmsn8IlGoQD8SrrygAuWPAhI0mHPmT5RAOm-Le+F9jicgDcAFChoJBQAIKKcIgoqGoAjGr4AJyZchHg0ABCcQ5OSan4yQAMlQoA9NVQVMAIAMYA1lAA9gBurABm3O0A7qFAA" target="_blank" rel="noopener noreferrer" class="link-btn">999</a>.</p>
<h2 id="avoid-type-gymnastics-in-production-code">Avoid type gymnastics in production code<a class="anchor" href="/posts/type-programming#avoid-type-gymnastics-in-production-code">#</a></h2>
<p>Sometimes type programming is jokingly referred to as “type gymnastics” when it gets really complex, fancy and far more sophisticated than it needs to be in a typical application.
For example:</p>
<ol>
<li><a href="https://github.com/chinese-chess-everywhere/type-chess" target="_blank" rel="noopener noreferrer" class="link-btn">simulating a Chinese chess (象棋)</a></li>
<li><a href="https://blog.joshuakgoldberg.com/type-system-game-engines/" target="_blank" rel="noopener noreferrer" class="link-btn">simulating a Tic Tac Toe game</a></li>
<li><a href="https://itnext.io/implementing-arithmetic-within-typescripts-type-system-a1ef140a6f6f" target="_blank" rel="noopener noreferrer" class="link-btn">implementing arithmetic</a></li>
</ol>
<p>They are more like academic exercises, not suitable for production applications because:</p>
<ol>
<li>they are hard to comprehend, especially with esoteric TypeScript features.</li>
<li>they are hard to debug due to incredibly long and cryptic compiler error messages.</li>
<li>they are slow to compile.</li>
</ol>
<blockquote>
<p>Just like we have Leetcode for practicing your core programming skills, we have <a href="https://github.com/type-challenges/type-challenges" target="_blank" rel="noopener noreferrer" class="link-btn">type-challenges</a> for practicing your type programming skills.</p>
</blockquote>
<h2 id="closing-thoughts">Closing thoughts<a class="anchor" href="/posts/type-programming#closing-thoughts">#</a></h2>
<p>We have covered a lot in this blog post. The point of this post is not to really teach you TypeScript, rather than to reintroduce the &quot;hidden&quot; type language you might have overlooked ever since you started learning TypeScript.</p>
<p>Type programming is a niche and underdiscussed topic in the TypeScript community, and I don't think there is anything wrong with that - because ultimately adding types is just a means to an end, the end being writing more dependable web applications in JavaScript. Therefore, to me it is totally understandable that people don't often take the time to &quot;properly&quot; study the type language as they would for JavaScript or other programming languages.</p>
<h2 id="further-reading">Further Reading<a class="anchor" href="/posts/type-programming#further-reading">#</a></h2>
<ul>
<li><a href="https://gist.github.com/hediet/63f4844acf5ac330804801084f87a6d4" target="_blank" rel="noopener noreferrer" class="link-btn">Proof that TypeScript's Type System is Turing Complete</a></li>
<li><a href="https://itnext.io/typescript-and-turing-completeness-ba8ded8f3de3" target="_blank" rel="noopener noreferrer" class="link-btn">TypeScript and Turing Completeness</a></li>
</ul></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"meta":{"title":"An introduction to type programming in TypeScript","published":true,"listed":true,"date":"01/31/2022","lastUpdateDate":"07/24/2022","description":"Learn to write types using the type language and leverage your existing javascript knowledge to master TypeScript quicker","tags":"typescript","slug":"type-programming"},"code":"var Component=(()=\u003e{var i=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var r=a=\u003ec(a,\"__esModule\",{value:!0});var k=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),u=(a,s)=\u003e{r(a);for(var t in s)c(a,t,{get:s[t],enumerable:!0})},N=(a,s,t)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of d(s))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026c(a,n,{get:()=\u003es[n],enumerable:!(t=p(s,n))||t.enumerable});return a},g=a=\u003eN(r(c(a!=null?i(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=k((A,o)=\u003e{o.exports=_jsx_runtime});var b={};u(b,{default:()=\u003ew,frontmatter:()=\u003ey});var e=g(l()),y={title:\"An introduction to type programming in TypeScript\",published:!0,listed:!0,date:\"01/31/2022\",lastUpdateDate:\"07/24/2022\",description:\"Learn to write types using the type language and leverage your existing javascript knowledge to master TypeScript quicker\",tags:\"typescript\"};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(t,{})})):t();function t(){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h2:\"h2\",code:\"code\",ul:\"ul\",li:\"li\",img:\"img\",ol:\"ol\",div:\"div\",pre:\"pre\",span:\"span\",h3:\"h3\",strong:\"strong\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"See discussions on \",(0,e.jsx)(n.a,{href:\"https://news.ycombinator.com/item?id=30173375\",children:\"Hacker News\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"types-are-a-complex-language-of-their-own\",children:[\"Types are a complex language of their own\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#types-are-a-complex-language-of-their-own\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"I used to think of TypeScript as just JavaScript with type annotations sprinkled on top of it. With that mindset, I often found writing correct types tricky and daunting, to a point they got in the way of building the actual applications I wanted to build, and frequently, it led me to reach for \",(0,e.jsx)(n.code,{children:\"any\"}),\". And with \",(0,e.jsx)(n.code,{children:\"any\"}),\", I lose all type safety.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Indeed, types can get really complicated if you let them. After writing TypeScript for a while, it occurred to me that the TypeScript language actually consists of two sub-languages - one is JavaScript, and the other is the type language:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"for the JavaScript language, the world is made of JavaScript values\"}),`\n`,(0,e.jsx)(n.li,{children:\"for the type language, the world is made of types\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[`When we write TypeScript code, we are constantly dancing between these two worlds: we create types in our type world and \"summon\" them in our JavaScript world using type annotations (or have them implicitly inferred by the compiler); we can go in the other direction too: use TypeScript's `,(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/2/typeof-types.html#the-typeof-type-operator\",children:\"typeof operator\"}),\" on JavaScript variables/properties to retrieve the corresponding types (not the \",(0,e.jsx)(n.code,{children:\"typeof\"}),\" operator JavaScript provides to check runtime values' types).\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/art/blog/type-programming/twoworlds.png\",alt:\"alt\"})}),`\n`,(0,e.jsx)(n.p,{children:\"The JavaScript language is very expressive, so is the type language - in fact, the type language is so expressive that it has been proven to be Turing complete.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here I don't make any value judgment of whether being Turing complete is good or bad, nor do I know if it is even by design or by accident (in fact, often times, Turing-completeness was achieved \",(0,e.jsx)(n.a,{href:\"http://beza1e1.tuxen.de/articles/accidentally_turing_complete.html\",children:\"by accident\"}),\"). My point is the type language itself, as innocuous as it seems, is certainly powerful, highly capable and can perform arbitrary computation at compile time.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"When I started to think of the type language in TypeScript as a full-fledged programming language, I realized it even has a few characteristics of a functional programming language:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"use recursion instead of iteration\",`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"in \",(0,e.jsx)(n.a,{href:\"https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#tailrec-conditional\",children:\"TypeScript 4.5\"}),\" we have tail call optimized recursion (to some extent)\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.li,{children:\"types (data) are immutable\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"In this post, we will learn the type language in TypeScript by comparing it with JavaScript so that you can leverage your existing JavaScript knowledge to master TypeScript quicker.\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"This post assumes that readers have some familiarity with JavaScript and TypeScript. And if you want to learn TypeScript from scratch properly, you should start with \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/intro.html\",children:\"The TypeScript Handbook\"}),\". I am not here to compete with the docs.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"variable-declaration\",children:[\"Variable declaration\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#variable-declaration\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In JavaScript, the world is made of JavaScript values, and we declare variables to refer to values using keywords \",(0,e.jsx)(n.code,{children:\"var\"}),\", \",(0,e.jsx)(n.code,{children:\"const\"}),\" and \",(0,e.jsx)(n.code,{children:\"let\"}),\". For example:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" obj \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"name\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In the type language, the world is made of types, and we declare type variables using keywords \",(0,e.jsx)(n.code,{children:\"type\"}),\" and \",(0,e.jsx)(n.code,{children:\"interface\"}),\". For example:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Obj\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"name\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:'A more accurate name for \\u201Ctype variables\\u201D is type synonyms or type alias. I use the word \"type variables\" to draw an analogy to how a JavaScript variable references a value.'}),`\n`,(0,e.jsx)(n.p,{children:\"It is not a perfect analogy though, a type alias doesn\\u2019t create or introduce a new type\\u2014they are only a new name for existing types. But I hope drawing this analogy makes explaining concepts of the type language much easier.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Types and values are very related. A type, at its core, represents the set of possible values and the valid operations that can be done on the values. Sometimes the set is finite, e.g., \",(0,e.jsx)(n.code,{children:\"type Name = 'foo' | 'bar'\"}),\", a lot of times the set is infinite, e.g., \",(0,e.jsx)(n.code,{children:\"type Age = number\"}),\". In TypeScript we integrate types and values and make them work together to ensure that the runtime values match the compile-time types.\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"local-variable-declaration\",children:[\"Local variable declaration\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#local-variable-declaration\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"We talked about how you can create type variables in the type language. However, the type variables have a global scope by default. To create a local type variable, we can use the \",(0,e.jsx)(n.code,{children:\"infer\"}),\" keyword in our type language.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token constant\",children:\"A\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// global scope\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token constant\",children:\"B\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"A\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token keyword\",children:\"infer\"})}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"C\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token constant\",children:\"C\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token comment\",children:\"// *only* inside this expression, C represents A\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Although this particular way of creating scoped variables might seem strange to JavaScript developers, it actually finds its roots in some pure functional programming languages. For example, in Haskell, we can use the \",(0,e.jsx)(n.code,{children:\"let\"}),\" keyword with \",(0,e.jsx)(n.code,{children:\"in\"}),\" to perform scoped assignments as in \",(0,e.jsx)(n.code,{children:\"let {assignments} in {expression}\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-Haskell\",children:(0,e.jsx)(n.code,{className:\"language-Haskell\",children:\"let two = 2; three = 3 in two * three \\n//                         \\u2191       \\u2191\\n// two and three are only in scope for the expression `two * three` \"})})}),`\n`,(0,e.jsxs)(\"details\",{children:[(0,e.jsx)(\"summary\",{children:(0,e.jsxs)(\"b\",{children:[(0,e.jsx)(n.code,{children:\"infer\"}),\" is useful for caching some intermediate types\"]})}),`\n`,(0,e.jsx)(\"p\",{children:\"Here is an example:\"}),(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"ConvertFooToBar\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'bar'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"ConvertBarToBaz\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'bar'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'baz'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"ConvertFooToBaz\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" ConvertFooToBar\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token keyword\",children:\"infer\"})}),\" Bar \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),` \n        Bar `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'bar'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" ConvertBarToBaz\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Bar\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),` \n    `,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Baz\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" ConvertFooToBaz\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})}),(0,e.jsxs)(n.p,{children:[\"Without \",(0,e.jsx)(n.code,{children:\"infer\"}),\" to create a local type variable \",(0,e.jsx)(n.code,{children:\"Bar\"}),\", we have to calculate \",(0,e.jsx)(n.code,{children:\"Bar\"}),\" twice:\"]}),(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"ConvertFooToBar\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'bar'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"ConvertBarToBaz\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"G\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'bar'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'baz'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"ConvertFooToBaz\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" ConvertFooToBar\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'bar'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),` \n    ConvertBarToBaz`,(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"ConvertFooToBar\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// call `ConvertFooToBar` twice\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Baz\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" ConvertFooToBaz\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"equality-comparisons-and-conditional-branching\",children:[\"Equality comparisons and conditional branching\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#equality-comparisons-and-conditional-branching\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In JavaScript. we can use \",(0,e.jsx)(n.code,{children:\"===\"}),\"/\",(0,e.jsx)(n.code,{children:\"==\"}),\" with if statement or the conditional (ternary) operator \",(0,e.jsx)(n.code,{children:\"?\"}),\" to perform equality check and conditional branching.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In the type language, on the other hand, we use the \",(0,e.jsx)(n.code,{children:\"extends\"}),' keyword for \"equality check\", and the conditional (ternary) operator ',(0,e.jsx)(n.code,{children:\"?\"}),\" for conditional branching too as in:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[\"TypeC \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" TypeA \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"TypeB\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" TrueExpression \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` FalseExpression\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"If \",(0,e.jsx)(n.code,{children:\"TypeA\"}),\" is assignable or substitutable to \",(0,e.jsx)(n.code,{children:\"TypeB\"}),\", then we enter the first branch and get the type from \",(0,e.jsx)(n.code,{children:\"TrueExpression\"}),\" and assign that to \",(0,e.jsx)(n.code,{children:\"TypeC\"}),\" ; otherwise we get the type from \",(0,e.jsx)(n.code,{children:\"FalseExpression\"}),\" as a result to \",(0,e.jsx)(n.code,{children:\"TypeC\"}),\".\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"The concept of assignability/substitutability is one of the core concepts in TypeScript that deserves a separate post - I wrote \",(0,e.jsx)(n.a,{href:\"/posts/type-hierarchy-tree\",children:\"one covering that in detail\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"A concrete example in JavaScript:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" username \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),` matched\n\n`,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"username \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    matched `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    matched `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Translate it into the type language:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Username\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Matched\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Username \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// true\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.code,{children:\"extends\"}),\" keyword is versatile. It can also apply constraints to generic type parameters. For example:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsxs)(n.span,{className:\"token generic-function\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"getUserName\"}),(0,e.jsxs)(n.span,{className:\"token generic class-name\",children:[(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"name\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n\t`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`name\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"By adding the generic constraints, \",(0,e.jsx)(n.code,{children:\"\u003cT extends {name: string}\u003e\"}),\" we ensure the argument our function takes always consist of a \",(0,e.jsx)(n.code,{children:\"name\"}),\" property of the type \",(0,e.jsx)(n.code,{children:\"string\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"retrieve-types-of-properties-by-indexing-into-object-types\",children:[\"Retrieve types of properties by indexing into object types\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#retrieve-types-of-properties-by-indexing-into-object-types\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In JavaScript we can access object properties with square brackets e.g. \",(0,e.jsx)(n.code,{children:\"obj['prop']\"}),\" or the dot operator e.g., \",(0,e.jsx)(n.code,{children:\"obj.prop\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"In the type language, we can extract property types with square brackets as well.\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"User\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"name\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" age\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Name\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" User\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'name'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"This works not just with object types, we can also index the type with tuples and arrays.\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Names\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Name\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Names\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Tuple\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Age\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Tuple\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"functions\",children:[\"Functions\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#functions\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[`Functions are the main reusable \\u201Cbuilding blocks\\u201D of any JavaScript program. They take some input (some JavaScript values) and return an output (also some JavaScript values).\nIn the type language, we have generics. Generics `,(0,e.jsx)(n.strong,{children:\"parameterize\"}),\" types like functions \",(0,e.jsx)(n.strong,{children:\"parameterize\"}),\" value. Therefore, a generic is conceptually similar to a function in JavaScript.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"For example, in JavaScript:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fn\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" b \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'world'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"a\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" b\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fn\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'hello'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'// [\"hello\", \"world\"]'}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"For our type language, we have:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"Fn  \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"A\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"B\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'world'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\"   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"A\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"B\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"//   \\u2191    \\u2191           \\u2191                          \\u2191              \\u2191\"}),`\n`,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// name parameter parameter type          default value   function body/return statement\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Result\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Fn\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'hello'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'// [\"hello\", \"world\"]'}),`\n`]})})}),`\n`,(0,e.jsxs)(\"details\",{children:[(0,e.jsx)(\"summary\",{children:(0,e.jsx)(\"b\",{children:\"this is still not a perfect analogy though...\"})}),`\n`,(0,e.jsxs)(\"p\",{children:[\"Generics are by no means exactly the same as JavaScript's functions. For one, unlike functions in JavaScript, Generics are not first-class citizens in the type language. That means we cannot pass a generic to another generic like we pass a function to another function as TypeScript doesn't allow \",(0,e.jsx)(n.a,{href:\"https://github.com/microsoft/TypeScript/issues/1213\",children:\"generics as type parameters\"}),\".\"]})]}),`\n`,(0,e.jsxs)(n.h3,{id:\"map-and-filter\",children:[\"Map and filter\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#map-and-filter\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"In our type language, types are immutable. If we want to modify a part of a type, we have to transform the existing ones into \",(0,e.jsx)(n.strong,{children:\"new types\"}),\". In the type language, the details of iterating over a data structure (i.e. an object type) and applying transformations evenly are abstracted away by \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/2/mapped-types.html\",children:\"Mapped Types\"}),\". We can use it to implement operations that are conceptually similar to the map and filter array methods in JavaScript.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"In JavaScript, let's say we want to transform an object's properties from numbers to strings:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    name`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    age`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"28\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"stringifyProp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"fromEntries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"entries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"object\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n\t\t`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"key\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"key\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"String\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" userWithStringProps \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"stringifyProp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// {name:'foo', age: '28'}\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In the type language, the mapping is done using this syntax \",(0,e.jsx)(n.code,{children:\"[K in keyof T]\"}),\" where the \",(0,e.jsx)(n.code,{children:\"keyof\"}),\" operator gives us property names as a string union type.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"User\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    name`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    age`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"StringifyProp\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"K\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UserWithStringProps\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" StringifyProp\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"User\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// { name: string; age: string; }\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"In JavaScript, we can filter out the properties of an object based on some critiria. For example, we can filter out all non-string properties:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" user \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    name`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    age`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"28\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"filterNonStringProp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"fromEntries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"entries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"object\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n        `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"filter\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"key\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"typeof\"}),\" value \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'string'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"key\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" filteredUser \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"filterNonStringProp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// {name: 'foo'}\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In our type language, this can be achieved with the \",(0,e.jsx)(n.code,{children:\"as\"}),\" operator and the \",(0,e.jsx)(n.code,{children:\"never\"}),\" type:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"User\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    name`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    age`,(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"FilterStringProp\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"K\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"keyof\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"K\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"K\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"FilteredUser\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" FilterStringProp\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"User\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// { name: string }\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"There are a bunch of builtin \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/utility-types.html\",children:\"utility \\u201Cfunctions\\u201D\"}),\" (generics) for transforming types in TypeScript so often times you don't have to re-invent the wheels.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"pattern-matching\",children:[\"Pattern matching\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#pattern-matching\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"We can also use the \",(0,e.jsx)(n.code,{children:\"infer\"}),\" keyword to perform pattern matching in the type language.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"For example, in a JavaScript program, we can use regex to extract a part of a string:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" str \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo-bar'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token regex-source language-regex\",children:[\"foo-\",(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*\"})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// 'bar'\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"The equivalence in our type language:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Str\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo-bar'\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Bar\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Str \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"foo-\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"infer\"}),\" rest\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" rest \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"never\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// 'bar'\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"recursion-instead-of-iteration\",children:[\"Recursion, instead of iteration\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#recursion-instead-of-iteration\",children:\"#\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"Just like many pure functional programming languages out there, in our type language, there is no syntactical construct for for loop to iterate over a list of data. Recursion take the place of loops.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Let's say in JavaScript, we want to write a function to return an array with same item repeated multiple times. Here is one possible way you can do that:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fillArray\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" n\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" res \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" n\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n        res`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"The recursive solution would be:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fillArray\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" n\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" array \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" array\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" n \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" array \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fillArray\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" n\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token spread operator\",children:\"...\"}),\"array\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"How do we write out the equivalence in our type language? Here are logical steps to arrive at one solution:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"create a generic type called \",(0,e.jsx)(n.code,{children:\"FillArray\"}),\" (remember we talked about that generics in our type language are just like functions?)\",`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[\"FillArray\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"N\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"Array\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Item\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:['Inside the \"function body\", we need to check if the ',(0,e.jsx)(n.code,{children:\"length\"}),\" property on \",(0,e.jsx)(n.code,{children:\"Array\"}),\" is already \",(0,e.jsx)(n.code,{children:\"N\"}),\" using the \",(0,e.jsx)(n.code,{children:\"extends\"}),\" keyword.\",`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"if it has reached to \",(0,e.jsx)(n.code,{children:\"N\"}),\" (the base case), then we simply return \",(0,e.jsx)(n.code,{children:\"Array\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"if it hasn't reached to \",(0,e.jsx)(n.code,{children:\"N\"}),\", it recurses and added one more \",(0,e.jsx)(n.code,{children:\"Item\"}),\" into \",(0,e.jsx)(n.code,{children:\"Array\"})]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Putting these together, we have:\"}),`\n`,(0,e.jsx)(n.div,{className:\"remark-highlight\",children:(0,e.jsx)(n.pre,{className:\"language-typescript\",children:(0,e.jsxs)(n.code,{className:\"language-typescript\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"FillArray\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"N\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"Array\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" Item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"})]}),` \n    `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"Array\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'length'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:(0,e.jsx)(n.span,{className:\"token constant\",children:\"N\"})}),` \n        `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"Array\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" FillArray\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token constant\",children:\"N\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),(0,e.jsx)(n.span,{className:\"token builtin\",children:\"Array\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" Item\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Foos\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" FillArray\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'foo'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'// [\"foo\", \"foo\", \"foo\"]        '}),`\n`]})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"limits-for-recursion-depth\",children:[\"Limits for recursion depth\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#limits-for-recursion-depth\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Before TypeScript 4.5, the max recursion depth is \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/play?ts=4.4.4\u0026ssl=3\u0026ssc=10\u0026pln=3\u0026pc=17#code/C4TwDgpgBAShkENgDkA8BJYEC2AaKyUEAHlgHYAmAzlGQK7YBGEATvgCp1gA20J51KAjIgA2gF0oAXigSAfNKiceEUQHJeZAObAAFmsn8IlGoQD8SrrygAuWPAhI0mHPmT5RAOm-Le+F9jicgDcAFCgkFAAQopwiCioagCMavgALACsCuHg0ACCsQ5OiSnpAGwKAPSVUFTACADGANZQAPYAbqwAZtytAO5AA\",children:\"45\"}),\". In TypeScript 4.5, we have tail call optimization, and the limit increased to \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/play?ts=4.5.4#code/C4TwDgpgBAShkENgDkA8BJYEC2AaKyUEAHlgHYAmAzlGQK7YBGEATvgCp1gA20J51KAjIgA2gF0oAXigSAfNKiceEUQHJeZAObAAFmsn8IlGoQD8SrrygAuWPAhI0mHPmT5RAOm-Le+F9jicgDcAFChoJBQAIKKcIgoqGoAjGr4AJyZchHg0ABCcQ5OSan4yQAMlQoA9NVQVMAIAMYA1lAA9gBurABm3O0A7qFAA\",children:\"999\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"avoid-type-gymnastics-in-production-code\",children:[\"Avoid type gymnastics in production code\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#avoid-type-gymnastics-in-production-code\",children:\"#\"})]}),`\n`,(0,e.jsx)(n.p,{children:`Sometimes type programming is jokingly referred to as \\u201Ctype gymnastics\\u201D when it gets really complex, fancy and far more sophisticated than it needs to be in a typical application.\nFor example:`}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/chinese-chess-everywhere/type-chess\",children:\"simulating a Chinese chess (\\u8C61\\u68CB)\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://blog.joshuakgoldberg.com/type-system-game-engines/\",children:\"simulating a Tic Tac Toe game\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://itnext.io/implementing-arithmetic-within-typescripts-type-system-a1ef140a6f6f\",children:\"implementing arithmetic\"})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"They are more like academic exercises, not suitable for production applications because:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"they are hard to comprehend, especially with esoteric TypeScript features.\"}),`\n`,(0,e.jsx)(n.li,{children:\"they are hard to debug due to incredibly long and cryptic compiler error messages.\"}),`\n`,(0,e.jsx)(n.li,{children:\"they are slow to compile.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"Just like we have Leetcode for practicing your core programming skills, we have \",(0,e.jsx)(n.a,{href:\"https://github.com/type-challenges/type-challenges\",children:\"type-challenges\"}),\" for practicing your type programming skills.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"closing-thoughts\",children:[\"Closing thoughts\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#closing-thoughts\",children:\"#\"})]}),`\n`,(0,e.jsx)(n.p,{children:'We have covered a lot in this blog post. The point of this post is not to really teach you TypeScript, rather than to reintroduce the \"hidden\" type language you might have overlooked ever since you started learning TypeScript.'}),`\n`,(0,e.jsx)(n.p,{children:`Type programming is a niche and underdiscussed topic in the TypeScript community, and I don't think there is anything wrong with that - because ultimately adding types is just a means to an end, the end being writing more dependable web applications in JavaScript. Therefore, to me it is totally understandable that people don't often take the time to \"properly\" study the type language as they would for JavaScript or other programming languages.`}),`\n`,(0,e.jsxs)(n.h2,{id:\"further-reading\",children:[\"Further Reading\",(0,e.jsx)(n.a,{className:\"anchor\",href:\"#further-reading\",children:\"#\"})]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://gist.github.com/hediet/63f4844acf5ac330804801084f87a6d4\",children:\"Proof that TypeScript's Type System is Turing Complete\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://itnext.io/typescript-and-turing-completeness-ba8ded8f3de3\",children:\"TypeScript and Turing Completeness\"})}),`\n`]})]})}}var w=f;return b;})();\n;return Component;","tweetIDs":[],"tweets":[]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"type-programming"},"buildId":"CqfzUjxO3hrsg__Vyai7K","isFallback":false,"dynamicIds":[2204],"gsp":true,"scriptLoader":[]}</script></body></html>